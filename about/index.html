<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />



    <link rel="shortcut icon" href="../images/favicon.ico">


    <link rel="icon" type="image/png" href="../images/favicon-192x192.png" sizes="192x192">


    <link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png">

    <!-- title -->

    <title>Litsasuk</title>

    <!-- async scripts -->
    <!-- Google Analytics -->

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-13047966-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-13047966-1');
    </script>


    <!-- Umami Analytics -->


    <!-- styles -->

    <link rel="stylesheet" href="../css/style.css">

    <!-- persian styles -->

    <!-- rss -->

    <!-- mathjax -->

    <meta name="generator" content="Hexo 7.3.0"></head>

<body class="max-width mx-auto px3 ltr">



<div class="content index py4 h-card">

    <header id="header">

        <img id="logo" alt class="u-logo" src="../images/litsasuk.png" />


        <div id="title">
            <a class="u-url u-uid" href="/"> <h1 class="p-name">Litsasuk</h1> </a>
        </div>

        <div id="nav">
            <ul>
                <li class="icon">
                    <a href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-2x"></i></a>
                </li>

                <li><a href="../">Home</a></li>
                <li><a href="../articles/">Articles</a></li>

                <li><a href="../categories/">Categories</a></li>

                <li><a href="./">About</a></li>

            </ul>
        </div>
    </header>

    <section id="about" class="p-note">

        <p>This is Litsasuk Speaking!</p>



        <section id="writing">
    <span class="h1" style="border-left: 5px solid #36414d; padding: 5px; color: #fff; background-color: #a3b8cc; font-size: 20px; font-weight: bold; line-height: 1; text-transform: uppercase; margin-top: 20px;">
        <a href="" style="color: #fff; text-decoration: none;">about</a>
    </span>
        </section>

        <a id="a001285"></a>
        <div class="entry" id="entry-1285">
            <h3 class="entry-header">32 位 handle 的一种生成方法</h3>
            <div class="entry-content">
                <div class="entry-body">
                    <p>我倾向于在 C 程序里使用整数 handle ，而不是指针。尤其是需要做弱引用的时候。</p>

                    <p>我认为，一个好的 handle 生成算法，应该满足：</p>

                    <ol>
                        <li>即使 handle 被销毁了，它这个数字也应该被保留，不应该被新的 handle 复用。posix api 里的文件 id 就不符合这一点。</li>
                        <li>提供一个 api 可以判断一个 handle 是否有效，其时间复杂度为 O(1) 。</li>
                        <li>从 handle 对应为对象的内存地址的时间复杂度应该为 O(1) ，不应该比指针有明显的性能问题。虽然 hash 表理论上可以满足 O(1) 的时间复杂度，但在糟糕的场景（hash 碰撞发生时）并不能保证这一点。</li>
                        <li>构造 handle 时间复杂度也为 O(1) 。</li>
                        <li>handle 的数字位宽最好不要超过 32 bit 。</li>
                    </ol>

                </div>
            </div>
        </div>




    </section>




    <footer id="footer">
        <div class="footer-left">
            Copyright &copy;


            2009-2024
            Litsasuk
        </div>
        <div class="footer-right">
            <nav>
                <ul>
                    <!--
                   --><li><a href="./">Home</a></li><!--
     --><!--
       --><li><a href="./articles/">Articles</a></li><!--
     --><!--
       --><li><a href="./categories/">Categories</a></li><!--
     --><!--
       --><li><a href="./about/">About</a></li><!--
     -->
                </ul>
            </nav>
        </div>
    </footer>

</div>
<!-- styles -->



<link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


<!-- jquery -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->


<script src="../js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
